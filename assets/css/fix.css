/* =========================================================
   FIX.CSS (FINAL) — PC 고정 사이드바 + 모바일/태블릿 오프캔버스
   - 중복 미디어쿼리/중복 sidebar 규칙 제거
   - PC에서는 사이드바 항상 보임
   - <=980px 에서는 상단 파란바 + 햄버거/엑스 + 슬라이드 메뉴
   ========================================================= */

/* ---------------------------------------------------------
   1) Sidebar 섹션 구분선
   --------------------------------------------------------- */
#sidebar > .inner > section{
  border-top: solid 2px rgba(210,215,217,.75);
  margin-top: 2rem;
  padding-top: 2rem;
}
#sidebar > .inner > section:first-of-type{
  border-top: none;
  margin-top: 0;
  padding-top: 0;
}

/* ---------------------------------------------------------
   2) 로고 섹션
   --------------------------------------------------------- */
#sidebar-brand{
  padding: 1.8rem 1.5rem 1.1rem;
  text-align: center;
  border-top: none !important;
  border-bottom: none !important;
}
#sidebar-brand .sidebar-logo img{
  display: block;
  max-width: 140px;
  height: auto;
  margin: 0 auto;
}

/* ---------------------------------------------------------
   3) 메뉴 공통
   --------------------------------------------------------- */
#menu{ border-top: none !important; }
#menu > ul{
  padding: 0 1.5rem 1.5rem;
  margin: 0;
}
#menu a{ text-decoration: none; }

/* active 밑줄(링크형) */
#menu li.active > a,
#menu a[aria-current="page"]{
  display:block;
  margin: 1.5rem 0;
  font-weight: 700;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--brand);
  border-top: 0 !important;
}

/* active 밑줄(H3형: 首页) */
#menu li.active .menu-home{
  margin: 1.5rem 0;
  padding-bottom: 1rem;
  font-size: 1.4rem;
  font-weight: 700;
  color: #222;
  border-bottom: 2px solid var(--brand);
}

/* ---------------------------------------------------------
   4) 헤더 한 줄 정렬
   --------------------------------------------------------- */
#header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom: 1px solid var(--brand) !important;
  padding-bottom:12px;
  margin-bottom:24px;
}
#header .logo{ margin-right:auto; }
#header .icons{
  display:flex;
  gap:14px;
  margin-left:auto;
}

/* =========================================================
   A) DESKTOP (>=981px): sidebar fixed left, no toggle bar
   ========================================================= */
@media screen and (min-width:981px){

  /* 모바일 상단바/토글 완전 제거 */
  a.toggle{ display:none !important; }
  body{ padding-top:0 !important; overflow:auto !important; }

  /* PC 사이드바 고정 */
  #sidebar{
    position:fixed !important;
    top:0 !important;
    left:0 !important;
    width:320px !important;
    height:100vh !important;
    overflow-y:auto !important;
    overflow-x:hidden !important;
    transform:none !important;
    transition:none !important;
    z-index:1000 !important;
    background:#f2f2f2 !important;
  }

  /* 메인 영역 밀기 */
  #wrapper{
    padding-left:320px !important;
    padding-top:0 !important;
    margin-left:0 !important;
  }

  #main{ margin-left:0 !important; min-width:0 !important; width:100% !important; }

  /* PC에서 혹시 남아있는 off-canvas 상태 무력화 */
  body.is-menu-visible #sidebar{ left:0 !important; }
}

/* =========================================================
   B) TABLET + MOBILE (<=980px): top blue bar + off-canvas LEFT
   ========================================================= */
@media screen and (max-width:980px){

  /* PC용 왼쪽 여백 제거(왼쪽 빈 공간 원인 차단) */
  #wrapper{ padding-left:0 !important; margin-left:0 !important; }
  #main{ margin-left:0 !important; }
  #main > .inner{ padding-left:0 !important; padding-right:0 !important; }

  /* 콘텐츠를 상단 파란바 아래로 */
  body{ padding-top:56px !important; }

  /* 상단 파란바(전체 클릭 영역) */
  a.toggle{
    display:block !important;
    position:fixed !important;
    top:0 !important;
    left:0 !important;               /* ✅ 0p 금지 */
    right:0 !important;
    width:100% !important;
    height:56px !important;
    background:var(--brand) !important;
    z-index:10001 !important;

    border:0 !important;
    border-radius:0 !important;
    box-shadow:none !important;
    text-decoration:none !important;

    font-size:0 !important;
    line-height:0 !important;
    text-indent:-9999px !important;
    overflow:hidden !important;
  }

  /* 햄버거 */
  a.toggle::before{
    content:"" !important;
    position:absolute !important;
    left:16px !important;
    top:50% !important;
    transform:translateY(-50%) !important;
    width:28px !important;
    height:2px !important;
    background:rgba(255,255,255,.95) !important;
    border-radius:2px !important;
    box-shadow:
      0 -8px 0 rgba(255,255,255,.95),
      0  8px 0 rgba(255,255,255,.95) !important;
  }

  /* open -> X */
  body.is-menu-visible a.toggle::before{
    width:28px !important;
    box-shadow:none !important;
    transform:translateY(-50%) rotate(45deg) !important;
  }
  body.is-menu-visible a.toggle::after{
    content:"" !important;
    position:absolute !important;
    left:16px !important;
    top:50% !important;
    width:28px !important;
    height:2px !important;
    background:rgba(255,255,255,.95) !important;
    border-radius:2px !important;
    transform:translateY(-50%) rotate(-45deg) !important;
  }

  /* 오프캔버스 사이드바 (LEFT) */
  #sidebar{
    position:fixed !important;
    top:56px !important;
    left:-320px !important;
    right:auto !important;
    width:320px !important;
    height:calc(100vh - 56px) !important;
    overflow-y:auto !important;
    overflow-x:hidden !important;
    background:#f2f2f2 !important;
    z-index:10000 !important;
    transition:left .28s ease !important;
    -webkit-overflow-scrolling:touch !important;
    transform:none !important;
  }
  body.is-menu-visible #sidebar{ left:0 !important; }

  /* 메뉴 열리면 배경 스크롤 잠금 */
  body.is-menu-visible{ overflow:hidden !important; }
}

/* =========================================================
   C) PHONE (<=736px): narrower sidebar
   ========================================================= */
@media screen and (max-width:736px){
  #sidebar{ width:260px !important; left:-260px !important; }
  body.is-menu-visible #sidebar{ left:0 !important; }
}
